<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create/Edit Profile</title>
    <!-- Include Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Include Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        body {
            margin: 20px;
            font-family: Arial, sans-serif;
        }

        .tab-content {
            margin-top: 20px;
        }

        .form-actions {
            margin-top: 20px;
            text-align: right;
        }

        .form-actions button {
            padding: 10px 20px;
        }

        .form-group label {
            font-weight: bold;
        }

        .select2-container {
            width: 100% !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Create/Edit Profile</h2>
        <ul class="nav nav-tabs" id="profileTabs" role="tablist">
            <li class="nav-item">
                <button class="nav-link active" id="basic-info-tab" data-bs-toggle="tab" data-bs-target="#basic-info" type="button" role="tab">Basic Info</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="company-info-tab" data-bs-toggle="tab" data-bs-target="#company-info" type="button" role="tab">Company Info</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="membership-info-tab" data-bs-toggle="tab" data-bs-target="#membership-info" type="button" role="tab">Membership Info</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="additional-info-tab" data-bs-toggle="tab" data-bs-target="#additional-info" type="button" role="tab">Additional Info</button>
            </li>
        </ul>

        <form
            action="{% if profile %}{% url 'profile-edit' profile.pk %}{% else %}{% url 'profile-create' %}{% endif %}"
            method="post"
        >
            {% csrf_token %}
            <div class="tab-content">
                <!-- Basic Info Tab -->
                <div class="tab-pane fade show active" id="basic-info" role="tabpanel">
                    <div class="form-group mb-3">
                        <label for="user">User *</label>
                        <select id="user" name="user" class="form-control select2">
                            <option value="">Select User</option>
                            {% for user in users %}
                                <option value="{{ user.id }}" {% if profile and profile.user.id == user.id %}selected{% endif %}>{{ user.username }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <label for="sponsor">Sponsor</label>
                        <select id="sponsor" name="sponsor" class="form-control select2">
                            <option value="">Select Sponsor</option>
                            {% for user in users %}
                                <option value="{{ user.id }}" {% if profile and profile.sponsor and profile.sponsor.id == user.id %}selected{% endif %}>{{ user.username }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <label for="title">Title</label>
                        <select id="title" name="title" class="form-control">
                            <option value="">Select Title</option>
                            <option value="Mr." {% if profile and profile.title == 'Mr.' %}selected{% endif %}>Mr.</option>
                            <option value="Mrs." {% if profile and profile.title == 'Mrs.' %}selected{% endif %}>Mrs.</option>
                            <option value="Miss" {% if profile and profile.title == 'Miss' %}selected{% endif %}>Miss</option>
                            <option value="Ms." {% if profile and profile.title == 'Ms.' %}selected{% endif %}>Ms.</option>
                            <option value="Dr." {% if profile and profile.title == 'Dr.' %}selected{% endif %}>Dr.</option>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <label for="first_name">First Name</label>
                        <input type="text" id="first_name" name="first_name" class="form-control" value="{% if profile %}{{ profile.first_name }}{% endif %}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="last_name">Last Name</label>
                        <input type="text" id="last_name" name="last_name" class="form-control" value="{% if profile %}{{ profile.last_name }}{% endif %}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="suffix">Suffix</label>
                        <input type="text" id="suffix" name="suffix" class="form-control" value="{% if profile %}{{ profile.suffix }}{% endif %}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="display_name">Display Name</label>
                        <input type="text" id="display_name" name="display_name" class="form-control" value="{% if profile %}{{ profile.display_name }}{% endif %}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="gender">Gender</label>
                        <select id="gender" name="gender" class="form-control">
                            <option value="">Select Gender</option>
                            <option value="Male" {% if profile and profile.gender == 'Male' %}selected{% endif %}>Male</option>
                            <option value="Female" {% if profile and profile.gender == 'Female' %}selected{% endif %}>Female</option>
                        </select>
                    </div>
                </div>
                
                <!-- Company Info Tab -->
                <div class="tab-pane fade" id="company-info" role="tabpanel">
                    <div class="form-group mb-3">
                        <label for="company_name">Company Name</label>
                        <input type="text" id="company_name" name="company_name" class="form-control" value="{% if profile %}{{ profile.company_name }}{% endif %}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="product_service_description">Product/Service Description</label>
                        <input type="text" id="product_service_description" name="product_service_description" class="form-control" value="{% if profile %}{{ profile.product_service_description }}{% endif %}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="gst_registered_state">GST Registered State</label>
                        <input type="text" id="gst_registered_state" name="gst_registered_state" class="form-control" value="{% if profile %}{{ profile.gst_registered_state }}{% endif %}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="gst_identification_number_or_pan">GST Identification Number or PAN</label>
                        <input type="text" id="gst_identification_number_or_pan" name="gst_identification_number_or_pan" class="form-control" value="{% if profile %}{{ profile.gst_identification_number_or_pan }}{% endif %}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="industry">Industry</label>
                        <input type="text" id="industry" name="industry" class="form-control" value="{% if profile %}{{ profile.industry }}{% endif %}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="classification">Classification</label>
                        <input type="text" id="classification" name="classification" class="form-control" value="{% if profile %}{{ profile.classification }}{% endif %}">
                    </div>
                </div>

                <!-- Membership Info Tab -->
                <div class="tab-pane fade" id="membership-info" role="tabpanel">
                    <div class="form-group mb-3">
                        <label for="requested_speciality">Requested Speciality</label>
                        <input type="text" id="requested_speciality" name="requested_speciality" class="form-control" value="{% if profile %}{{ profile.requested_speciality }}{% endif %}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="membership_status">Membership Status</label>
                        <select id="membership_status" name="membership_status" class="form-control">
                            <option value="Active" {% if profile and profile.membership_status == 'Active' %}selected{% endif %}>Active</option>
                            <option value="Not Active" {% if profile and profile.membership_status == 'Not Active' %}selected{% endif %}>Not Active</option>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <label for="renewal_due_date">Renewal Due Date</label>
                        <input type="date" id="renewal_due_date" name="renewal_due_date" class="form-control" value="{% if profile %}{{ profile.renewal_due_date|date:'Y-m-d' }}{% endif %}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="Chapter">Chapter</label>
                        <select id="Chapter" name="Chapter" class="form-control">
                            <option value="">Select Chapter</option>
                            {% for chapter in chapters %}
                                <option value="{{ chapter.id }}" {% if profile and profile.Chapter and profile.Chapter.id == chapter.id %}selected{% endif %}>{{ chapter.chapter_name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <!-- Additional Info Tab -->
                <div class="tab-pane fade" id="additional-info" role="tabpanel">
                    <div class="form-group mb-3">
                        <label for="my_business">My Business</label>
                        <textarea id="my_business" name="my_business" class="form-control">{% if profile %}{{ profile.my_business }}{% endif %}</textarea>
                    </div>
                    <div class="form-group mb-3">
                        <label for="keywords">Keywords</label>
                        <input type="text" id="keywords" name="keywords" class="form-control" value="{% if profile %}{{ profile.keywords }}{% endif %}">
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="form-actions">
                <button type="submit" class="btn btn-success">Save Profile</button>
            </div>
        </form>
    </div>

    <!-- Include Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Include Select2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        // Initialize Select2 for the User dropdown
        $(document).ready(function() {
            $('.select2').select2({
                placeholder: 'Search for a user',
                allowClear: true
            });
        });
    </script>
</body>
</html>
